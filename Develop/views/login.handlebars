<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bootstrap layout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    
    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

 	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
 	
 	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 
</head>

<body>
    <div class="d-flex w-100">
  <ul class="list-group">
    <h2 class="list-group-item text-center font-weight-bold">Playlists</h2>
    {{#each playlists}}
      <button class="list-group-item artist-button" onclick="selectPlaylist('{{this.id}}')">
        <p class="inline text-left">{{this.name}}</p>
      </button>
    {{/each}}
  </ul>
</div>

<!-- add a new playlist -->
<form id="add-form" class="playlist-form" action="/users/playlists" method="POST">
  <div class="form-group">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" class="form-control" required>
  </div>
  <button type="submit" class="btn btn-primary">Add Playlist</button>
</form>

<!-- update an existing playlist -->
<form id="update-form" class="playlist-form" action="/users/playlists/:id" method="PUT">
  <input type="hidden" id="selectedPlaylistId" name="id" value="">
  <div class="form-group">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" class="form-control" required>
  </div>
  <button type="submit" class="btn btn-primary">Update Playlist</button>
  <button type="button" class="btn btn-secondary" onclick="clearSelectedPlaylist()">Cancel</button>
</form>

<!-- script to select a playlist and show the update form -->
<script>
  function selectPlaylist(id) {
    const playlists = {{json playlists}};
    const selectedPlaylist = playlists.find(p => p.id === id);
    document.getElementById('name').value = selectedPlaylist.name;
    document.getElementById('selectedPlaylistId').value = selectedPlaylist.id;
    document.getElementById('add-form').style.display = 'none';
    document.getElementById('update-form').style.display = 'block';
  }

  function clearSelectedPlaylist() {
    document.getElementById('name').value = '';
    document.getElementById('selectedPlaylistId').value = '';
    document.getElementById('update-form').style.display = 'none';
    document.getElementById('add-form').style.display = 'block';
  }
</script>

<!-- GET route for playlists -->
{{#if playlists}}
  <script>
    const playlists = {{json playlists}};
  </script>
{{/if}}

</body>







</html>
